workflows:
  default-workflow:
    name: Default Workflow
    environment:
      vars:
        ANDROID_FIREBASE_JSON: Encrypted(Z0FBQUFBQmR3dGVfYmNHVVc0MDJvOXp3ZzZGSGR6eERIaHZ5QUUwc0dhWEI1cW9jVnl3VDhtNFh0VDR0OEZ3WUJlbm9BTG5wWXk0VERqam1OWDEwcGw5S3RNZGZMdk9Lb0dDNjNaR2l0alpsV1pGdmp0NG5JUWUxMG1nNG5QSjVRN2pqVnpXWFVVYTAwNkZiTXBKWWtZVEVxVXJEVl9vYjVYZFNJVmVTZTBMeXg1d0NlLXJiLXp5RjRfbHhBM0tGZkx6c2NZRzJsUEdPcFJmUVlKcXdHRGpVeWVzY0psLWE3bWsxd3lobjBkeUtkTndTT1ZzblVEdjE0RkhTdEdWUF83bWI0T2FMLTduVVhEUWtmUEtuZnBxZkNoNUlTY1JqSE05RGFzQ2Y4dUJPNGtraUw4ZF9JWmRFVndDU054bDRmTU52UUJfNWJFcmhtUXFBanNCcmlsamVtb1JmMzlPbGxDVHkxaVdQNS1nbDMtWnNWSDZ3Mnc2MHZiVzBtOEItcnNTUGNnU0Q5OE5iWkZLcms0Q1hBMnBacHFsMWJaNFc5Z0Nab0U4UTFzVmlwdF9CV0J4d1FvSGx1N18wNlhKdDFBSElYcERBeHJFRWRDalRDVmFITy0tck1sSVQycWRQb2tORkFZTTRuejk4TVpETTZhOTJrN3RXOXRfVi1CbFNONUVPMzFQUmNZSDBrMGJOd2hQUkRfVXdVc0FzRVJoc2dyTjFEV3oyMEppWUpBS0NuMV9iTmZ6dGNrRFhsVFVGVWNJYWR2R2FWaV9zQUVKVXFiVGRaMVpFa1MwRFZlcmd6cjQ0ZEdCNUkxdE94dm0tLVhDeWtHMGtidUc1YmhIUXUwcVFVMkVKVF9kOVJhWHVvWDV2RGU0T0lLVUpZY3dyR2M1SFp0eTdWcTZHRExsX0dxbTdVOTZuTzRhTHN4b0Y4RXl6SEFMYk4wVVVEbmRtbjJNQm1PTmNvU2FVNkxpVzVWaTVOb3FTNmVGSWlaNDFQYV93NW9RbUJCemhlOUZHNjRQZHljMDRxdUZvNzRBNkxqMEpNQTVTdGtIUXJoZEtqQ3NRbExzdUNjWWxUS2lrbEE1N25BWEE2eXVqbWc5NEpFbURkSjNhdnB3OXlra2VFbDQ1UDFJaUFKd0FhQ254TTdwNGNkbGYwZVBhSm5JZTc0QVN5V3FNdnAwY3N2ZURWeDZiY1prRlVvS1hNekd4OW1kSUMzWmlYTmVhS0hva0MtZl9VTlU3d3JiQ2hSWkFENVBSR2dqZkhWOGU0VzR2ejEyR2V0LVlfRS1rMG0wMkhIYlcxRkQzRS14bXJ3SGVNX1JHRFFUR0hJVFY5bzZSeWcyVVNtbzI3TXh0ckFRRExkWFJPZ243dVZSNGt2c3pzVmgyOWJXTDM1OEc0YzFFazFvMGVKOFd2RGQyY3pFOWVXOU1qUHBETkFUUzM4Wkl4d25KVzZwMzA5dDdjaG9ha0FCOHFuT0lrNHdCa2NHdWx0dGVWQ2N1UVk4bTE2czhOR0F2UHdaY0N5VFVGWjdwRk1UWFNxOUpjcHhmU2lDZ0ZNRWh3aHRIcmVLUGJIaDZZYmRhcXUtcUVBYWZ3WWtLd1pUVmVPR1RzYWdIRjVuUUVTY3oxQzd1TVV2TVFiSHJHa2t5aV80ZDZnNFYyNHVYVm1ZaTB1RndiZFJTelRVVHFDN0o5a0JHZXdnWTNrVElYeXhUVDBQcElScklyMEw1ZEY3dlZ1UUIxcEN3cG4ydVFNMUliV3FueUJuTzJOR3Vkdi0tbVpfVnBqdWlVSkRFdllGTEMyQXBQR1Z2UGZhcDVZTVg0VlVEWlFjby1hMEQzcXZSUDFQTV9LQXpBSVU5cFc5TEdhOFFmd3NJZFlrM0xCLVdWQjVlRWVvZEVTVlFBc25Tc1dzS3U5OGdNZDM1TVNsMXNjQnlLMmJxLXlGVktLQThkS0NScGdIalhySnRNZEtGMzRLV3pvOFZzR214VVU4REtVYk02QzIwRGtQOFowaFAzektEMWo3R2g5UVdQbkQ0X0tLSUlpMzF5UXMwVmQxaXVIRG55MnFuRTVVeEtuOGREQnJTbzR2Mnd1SE9INHlXLUx1WVp1TmFRSncwMlV1TGF6SHNTVU44cXFuVlhkTWNiM21zMUNiRHM0aXBEaUVTWU5jeG8wY0lqWERuMWxLNnZpY3Y0SUFFanlpY2RkaVlnTGJIYlQ3SG1ZNUZ2MkJGWE9MSExTVGQ0UE96QUM1Snpfc1o3blZHaVRuNC1qeXRKd1B0RWE4WWFQc3FiSEVKa04xaWZfRklSZGJwUHZ3djQweVpKRi1rUHduT2JFODNCeGx6cUctWWZFQTNJcGZmeXdQY0lhcENOTk9abEdvUk9Lc3M3T0I0N3I5V0lON2ZnYjh1RnU2OS1KTUhsLWswbHVqVFdfX29qR053ZjFqUGRPbmVZNW9pTFhucEtFcHJUTXB5UGNFc0k0WEthY09UZ0ktZzlxZlcyZnprOFdFZjQwaExZSThGbW1IUjVOVmN4V0VXVklIQ2VWR0ljY0hUZmhUcUxJcl9RalBpT0ZlMkhBYnFDYWk5a2E2LS1uelZXUEtmckNPdTVUQlY4cjV1OWFza1VMVmJQLVZFUk56dGg1RW5LcXJLVThGNjNKTXZWcU42VDYwMWlycFRzSkwwV2ktaTN1cEpGUTAtMVRZckZFUkJORS1CU0FjZmdmX0l0VXlkeVpzUWo4b0ZKTGxQdnc2SVZ1LXk2NTY2T3R6X2xSZXpMNVQtRUxFUW8wNW9DQ0phR2I2b3pfTHNWVDB0T0ZyTjMtci1tZ0ZDU194SFJiR3BFcUhNVHhMQ1phSjJaNjlpVXJ5bWRQZ2RiNkpnUENhYU5sczJXamZXdU9uM1haV3lWNkRPWmNmNFpyaHdRMWZ1Q0ZUTTIwWGIzVHVNRjlkTXBWVGlCRi1KUlRUUXJBRTl5a19iaDFhdDcyMXhBRDFFZHFsY1p2QUtGNFlfWDJ3a0RzSk56eXozNlNvUUw0R2p6bk1xcFlaWEhFRDluS1RVNTU5UzNIbjk0alVmZEVLRXl4RzhZdEFPakVKV0xGUTR6Q1FvbGJkcWdUTzRUaGJydktBZHFvN0RPTFR0Wko1THJnaXl2blBNUURkQUppMjJCR1p5WDZyczJaTjYyNWZxYkNPOU9wMUhscjJyNVVqa3hWazcxZDlkSkQwZVRVSW90Y1BwODVMRUJKZW9nYk5HMTIxMEluVDdPRHk3bGdyM1o2Tk5yQlZhbWR0dFBOZ2NNTXc2NU05d0VZNGI0amdlNmx6dFV5M1NSZnZHaThtbHcybmQtVTNZWU5JYmNQa3VNV042dGZINDZkbEMxZEdac0R6c01tdEdralJzS3Y4VGgxU0s0WEtHZ21helZMeVQ0bXVpdHNlZDVhU3BhMDhLX3c5RUw5TVg0MllDQ043TWtyODA5dENPRnhIZGthdUQwU2tESW14eWk2WEZIMElKUjk0ZTZVMDJjT19pQU9mMTRHU05FWU04QndWMTBRc0JuanBJSFJmZHBMNDU3UzdTeWhMbmpUamctbzNXMG1fdXl2VVhOVUx0c2NqSjRnQUt6NDZsWm9Wb1F6VEhZTXYyRzdlS0FIcTJmV1IzVVNUTWVhbWppRjV0aVJyNG5zTUZXNy1zZWlmREFNVmpNczJQWWtpXzRvU2xjOEVMU0FPVnMwRlFiRGY5a0NkTFd5N1g0b3d2N0NjYzdnZ2dFR3NIazVHZ3U1eVI1YjMyRGNkS05uN0w0eC03REwyeDFDZWY1cEtDdktURF9iUFBfUzFmQjB0cGNMT3pUZWFJVVI5ZXUwcHAxbndhTVExdFQtU3JZaWpiVzY0WlRzV0pDU1BEU2NUSE5nTFlYbWFHX3ZxM2J1VWFMQ2hVTTBRQTlOdkJwOEM1UzNwZlJOc0R5Vjl6UDdYaUR2NWZOT285cmRYT2RZa1VlVlFHTzYxelY0cGlHS3oxVTJnY3k4Nk43N3VvTU9ENndNZFZiYlByYldqSExOc1RqQjMwWDRsVHgxRmRxT1NoeHo5ZU1KaTZ6NnV3bUhNanpSS2hmV1FnUUZnOVRWMWxsc1BLc2ZUdS16Y2lUdnZz)
        IOS_FIREBASE_JSON: Encrypted(Z0FBQUFBQmR3dGVfRnRPM0hiazBPYnE3UEtCNnlFWUJUU3RhcHJMR2IycmRaWTY3RWNpckRKRldjaXE1cGZ4OW9ISVhiZzZlZnpQaHgwUXQ5T1pqSW85RmxVU0ExVTBXUWpvY3huUjZKejFRSWVrOTNySGwtdmFOVnBZeVBXcHdnckYzNUk2aVQ5ak02WUtwNHNnNUJDMl8xZms3Wm5XMDNjZlZ6TGZqdmJWbnp5OW9aUFBhSTNZbEw2dmZldDc0S0NmYUFRRmFHQnpqM3lodXNWaTRwLUF0ODVPSXFfTmVXNkIyZHd3NnhOLXpfajBsNkxDbkduRE9lTHJOVHZPZU9Uc1psSU8xNW9DZ1J4MWQzeXJ5NmN0d3RIRzZoNWtYUVM4eXJNWnc0dkpYakRBb1plbzAtY2hyeC1VS3V5Yl9uVzNKc2x4ZUZWUWNmNUkzSE9zNHo4NUhZWnprZjJDN0ZYR3hjVlB1VjUxZUNJSXB1QUlnNDhSSVNTcHBqSzNIX1h3MVc0VFU5Z1FPT2VOR3pUd3RYNkxxaUxSRmtuYlNoSTUyd3VGbFdoRDlobWw2ajRNUzRZTjNxcXg3UnYycWZQU2F1Z3prc3Z2RE5EZE9ua2M4TmM5V3ZwM2JPTlVYbEw1empYa1NFRDFUQk5qRHJka1FaRTdRRWFibTRuMk5OQjVuRFFuZXVXLWRNcnJXNFZOYjl1YVdoTjVmYXNReDFPVGplX2NhNnhmWFV4VXlYamJDbDl0SF9BcDZDZ3RXNllibExLa09RUnprMy1ON3ZxMGx1RzNoaXBlOW1PbzUzcjU0d2h3RkFyaFBqeFRkM2h0TWxKcW54S29Jek9mNUd3WGY3THRRd3k4ZkNCNGlZdFB4U1QtVkdMdWptd2Q4YWpjcWFScUJwQVlSQUZlaFBXd3pxaVV2ZjZqODJ4UWRiR0NKNjk5UFlQQXN1Zzd5UXJ3VGNiN0VUdnloUmwtZm5WSEFpWlhhS3ZWTFVZUVc5dFIzYkJqUnZwaVRQMV9QR1pnazVNWWhIWEZGZUQyd0xOYjVvd0ppOU8tRWVWSkdOQW9mQ0xscWVxeTZSMFViZGJpemtHUXFpSGgzTklVUTEwTGFjZUV0NWRlSHItREpGcmVYYmRYa3BJOUg5QXNWOUhhckduOVk1TUthX1dpYTM4WUFoMmRYVEllOFVvd1FOMmFoZEl4b1MwdWlkVmQ1b0tUWmJCbVN3Z3l1RWV0blBObURnYUJoQnpVT1hYN3NrOXRuZGw5Y2hpVmNDM1llaGZkTXNyWkR5VG5QRnhnY2pRMC1iMk11QmQxZ1YwcXpsN19pZndOR1dsQ3NDR0xqSUFfMXpaRkhwMTdrRHNodDJjVXVpbEtIcjJaR00taVg5dElITkJQX216MUNUSHVjYU15XzdwdmZ6QnRPdTRuNmF5WjQ1TkVmbUE3V24wM2ZSU2t2enZkOTlXd184NnVsVkRIcTg5ZXJ4V2xXTC1WNzZCMEt0UUlJU21rM1lPTGcwY0M5S05zanlfVmpfV1BrT0tISk90RVMxVE5KcjlpQnZJUWMxYVV6N3Vkdl9Zd3V0VjhwY3lrWmd0U3NQcUNtZXQ4OFRuSGlsQWxGVkVfdmYtOGM5ZVB6QjlxQVZuSjNkZ05pYno3ZU5JS1FvM1hWY3k1X1poNldQSlhuNHR3OFc5SHh6VGxEQ1hYcl9XSlNQOGVsTVhWa09mSjNBV2dlQnItcjQ2QkV2WUg3Mzg3aTBBSy1QdjVCdWFkZHJZdDdTeFF5MVNWZi1pXy1jd1BLYldxZ21XR0NlbXdKazFrNWp0YlllMXdMV2JiTGxUT09pS0tvb05XNEgyNVItM1M5bG5kRnpHVzJfLWNCeDBwVUtRdWVPTjRvTEdwSlVlaFhMYVJOOW93RmZQOGhJNnVxemhnbVlVcUpuX29GNm80OUdSU3FmME05d1JPdGtVNGxLelhDeUhUTHVkbmhZMDg4c2lEMHMtOTJfeTZYNTRneWllMzlzdF9ReFJwRjJDeHlDMk9Zb3JZMHpQOFhNaW5OeGlOZG9nc2d5VDhYX1p1Qm9JdlMwQ1J1RndxMG5aeWxkemRUUDlzb3B0QjBpemdjenlUYjAtdjVxQUZVclVwV2t0WWJWYlVyaUo4cHpGSlVLV2gwMFVKdDVsMHdlVUdRc3UxdEdDWFRJSmhRSGxhWGM4OW5LOUZZMUFBSHhYUl9RWUVjTWRJQVNJQjNRRDBfYlZHNFZnOFBPSUViR056R1Rsb0xhVTVTUjRkVUxKZlQyYldqSVFNUHdkbk9lQzVlVVNNV2xlSVBPZzh5NUdBM0xwX056emJOZFpsWUdyVnFxbi1JVHlSR2Etbl9na2JqaTgxZExUcktEdC12Vm03bURwb1Bld01XLTFnSWgta3RLMGtvNEJLVFViWUt1YlRpVHA0MURHS1Fqb25lc05fUF94eVZ3emVfb0xIX2tLTmk0Z0RRcGRra3J3aVc0U1BMaUsxajRxZGhBbTFXSW5lUTdmd2lCZ1k2ZjJlWTRMdVdBTXMtdElUclA5aktqWVI1bUNMeTBhd1dpSVlTSHk2bk1acGhIZGF0aFFmNVNLaDhxQTJVb3E4TkFjSWl1VmFKV2doZzcweVVodlptT2hNc0tYdzJ4Wld0d2t4NGl0Snh2NGwtT2NkdEdGWVFja1hQZFZkRHE5REdnQTBUYldxcURXYjhUVmpUUDhXTTFGZVVISmRZSTBkNURNdmN4UWNCODZmQXNtbzZpc2lDWTZTd2xWTXRmUnZUdUNSLXM4ZGEwdG00cGVYSm9ETHVaRy1xUGh5TWFSaWw0Mk4tUW1fX1lHRnRjQkFGLWdtVktDT2RfV1BGeV9XLXFhZVJaaGVzWmVGZUFqdGFBUVdBc3RnQ1RxUmw1eFUyTFFRRzVhM05yeE1NMWFjTjk5ek1qMVhoTlhvZ1hoVlk4elhvLUgzcXZSajc5a19vNWZkY0FCSS1rRWhjMlhvZVdZeGh3QVR1WlYyZ2duZEpESDl2VzFkOG93PT0=)
      flutter: v1.9.1+hotfix.4
    scripts:
      - |
        # set up debug key.properties
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter test
      - |
        #!/bin/sh
        echo $ANDROID_FIREBASE_JSON | base64 --decode > $FCI_BUILD_DIR/android/app/google-services.json

        echo "Listing android Directory to confirm the google-services.json is there! "
        ls android/app/

        echo $IOS_FIREBASE_JSON | base64 --decode > $FCI_BUILD_DIR/ios/Runner/GoogleService-Info.plist

        echo "\nListing iOS Directory to confirm the GoogleService-Info.plist is there! "
        ls ios/Runner/
      - flutter build apk --verbose --debug
    publishing:
      email:
        recipients:
          - stevepop@gmail.com
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
